CREATE OR REPLACE PROCEDURE TransferFunds(
  from_account_id IN NUMBER,
  to_account_id IN NUMBER,
  amount IN NUMBER
) IS
  source_balance NUMBER;
BEGIN
  -- Get source account balance
  SELECT balance INTO source_balance
  FROM accounts
  WHERE account_id = from_account_id;

  IF source_balance < amount THEN
    DBMS_OUTPUT.PUT_LINE('Transfer failed: Insufficient balance.');
    RETURN;
  END IF;

  -- Deduct from source
  UPDATE accounts
  SET balance = balance - amount
  WHERE account_id = from_account_id;

  -- Add to destination
  UPDATE accounts
  SET balance = balance + amount
  WHERE account_id = to_account_id;

  COMMIT;
  DBMS_OUTPUT.PUT_LINE('â‚¹' || amount || ' transferred from Account ' ||
                       from_account_id || ' to Account ' || to_account_id);
END;
/
